<!DOCTYPE html>
<html class="no-js">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Transitioning from GreenSock GSAP to Web&nbsp;Animations</title>
		<meta name="description" content="We recently got a chance to work with the new Web Animations specification when building this year’s Google Santa Tracker. We normally use GreenSock GSAP for complex animation sequences so we were interested to see if the standards are catching up.">
		<meta name="keywords" content="Web Development, Web Design, UX, Web Developers, Digital, Studio, Agency, Stockholm, Consulting, Training, HTML, CSS, JavaScript, WordPress">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<meta property="og:locale" content="en_US" />
		<meta property="og:type" content="article" />
		<meta property="og:title" content="Transitioning from GreenSock GSAP to Web&nbsp;Animations" />
		<meta property="og:description" content="We recently got a chance to work with the new Web Animations specification when building this year’s Google Santa Tracker. We normally use GreenSock GSAP for complex animation sequences so we were interested to see if the standards are catching up." />
		<meta property="og:image" content="https://14islands.com/images/blog/web-animations/web-animations.png" />
		<meta property="og:url" content="https://14islands.com/blog/2015/03/13/transitioning-to-web-animations-from-greensock-gsap/" />
		<meta property="og:site_name" content="14islands" />

		<!-- Twitter Card data -->
		<meta name="twitter:card" content="summary">
		<meta name="twitter:site" content="@14islands">
		<meta name="twitter:title" content="Transitioning from GreenSock GSAP to Web&nbsp;Animations">
		<meta name="twitter:description" content="We recently got a chance to work with the new Web Animations specification when building this year’s Google Santa Tracker. We normally use GreenSock GSAP for complex animation sequences so we were interested to see if the standards are catching up.">
		<meta name="twitter:creator" content="@14islands">
		<meta name="twitter:image" content="https://14islands.com/images/blog/web-animations/web-animations.png">

		<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
		<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/favicon-194x194.png" sizes="194x194">
		<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
		<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
		<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
		<link rel="manifest" href="/android-chrome-manifest.json">
		<meta name="msapplication-TileColor" content="#ffffff">
		<meta name="msapplication-TileImage" content="/mstile-144x144.png">
		<meta name="theme-color" content="#ffffff">

		<script>
			// hide body to avoid flashing unstyled content
			var htmlEL = document.documentElement;
			htmlEL.className += ' js-loading';
			// make body visible after dom loaded
			document.addEventListener('DOMContentLoaded', function() {
				htmlEL.className = htmlEL.className.replace('js-loading', 'js-loaded');
			});
		</script>

		<link rel="stylesheet" href="/css/main.0bb9.css"/>

	</head>
	<body id="" class="page page-/blog/2015/03/13/transitioning-to-web-animations-from-greensock-gsap">

		<!--[if lt IE 9]>
				<p class="browsehappy"><span>You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.<span></p>
		<![endif]-->

		
<section class="hero hero--hidden">

  <div class="hero__content grid">
    <header class="grid__row hero__logo">
      <span class="logo-rect js-nav-home"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 892.2 305.2" enable-background="new 0 0 892.2 305.2"><path fill="#fff" d="M387 201.5h-14.6l.1-86.2h-12v-14.6h26.6l-.1 100.8z"/><path fill="#fff" d="M470.6 230.6H456v-29.2h-57l.1-15.5 41.3-85.2H455l-41.1 86.2h42v-57h14.6v57h11.9v14.6h-11.9v29.1z"/><path fill="#fff" d="M505.7 201.5h-11.9V100.7h11.9v100.8zm0-115.4h-11.9V74.2h11.9v11.9z"/><path fill="#fff" d="M547.6 203c-14.8 0-30.7-9-30.7-28.8V171h11.9v2c0 13.7 9.7 18.6 18.7 18.6 12.3 0 18.5-5.9 18.5-17.5 0-10.7-5.6-16.7-19.4-20.7-12.8-3.2-27.5-9.3-27.5-27.4 0-16.7 10.8-26.6 29-26.6 7.6 0 14.5 2.3 19.5 6.6 5.8 5 8.9 12.6 8.9 21.9v3.3h-11.9v-3.3c0-4-1.2-17-16.4-17-11 0-16.6 4.9-16.6 14.6.3 11.4 10.6 14.5 17.5 16.5l1.1.3c19.3 5.1 28.3 15.1 28.3 31.3.1 18.7-11.2 29.4-30.9 29.4z"/><path fill="#fff" d="M601.2 201.5h-11.9V60.9h11.9v140.6z"/><path fill="#fff" d="M642.7 203c-18.1 0-29-13.2-29-35.4v-33.1c0-31.7 20.2-35.1 29-35.1 10.1 0 18.1 4.4 22.7 12.6l1.4-11.3h9.2v100.8h-9.2l-1.4-11.3c-5.7 10.5-15.4 12.8-22.7 12.8zm2.5-92.1c-13 0-19.6 9.7-19.6 28.9v22.5c0 19.4 6.6 29.2 19.6 29.2 5.1 0 9.1-1.4 12-4.4 4.5-4.5 6.8-12.9 6.8-24.8v-22.5c.1-12.4-1.8-28.9-18.8-28.9z"/><path fill="#fff" d="M748.3 201.5h-11.9v-60.3c0-27.1-10.4-30.3-18.3-30.3-12.3 0-18.9 9.5-18.9 27.6v63h-11.9V100.7h9.2l1.5 11.8c4.7-8.5 12.7-13.1 22.9-13.1 18.2 0 27.4 11.4 27.4 33.8v68.3z"/><path fill="#fff" d="M787.7 203c-8.4 0-28.1-3.4-28.1-35.4v-33.1c0-10.6 2.7-35.1 28.1-35.1 9.1 0 16.4 4 21 11.3V60.9h11.9v140.5h-8.9l-1-11.3c-4.8 8.4-12.8 12.9-23 12.9zm2.8-92.1c-8.7 0-19 5.2-19 30.3v21.2c0 19.7 6.3 29.2 19 29.2 4.9 0 8.7-1.4 11.5-4.2 4.5-4.5 6.6-12.7 6.6-25.1v-21.2c0-20.9-5.6-30.2-18.1-30.2z"/><path fill="#fff" d="M861.2 203c-14.8 0-30.7-9-30.7-28.8V171h11.9v2c0 13.7 9.7 18.6 18.7 18.6 12.3 0 18.5-5.9 18.5-17.5 0-10.7-5.6-16.7-19.4-20.7-12.8-3.2-27.5-9.3-27.5-27.4 0-16.7 10.8-26.6 29-26.6 7.6 0 14.5 2.3 19.5 6.6 5.8 5 8.9 12.6 8.9 21.9v3.3h-11.9v-3.3c0-4-1.2-17-16.4-17-11 0-16.6 4.9-16.6 14.6.3 11.4 10.6 14.5 17.5 16.5l1.1.3c19.3 5.1 28.3 15.1 28.3 31.3.1 18.7-11.2 29.4-30.9 29.4z"/><circle fill="#fff" cx="152.6" cy="152.6" r="152.6"/><g opacity=".4"><path class="polygon-down--light" fill="#B7D02E" d="M122.4 204l53 52.5 31.7-10.2 11.1-10.4 6.8 14.5 21.7-20 6.9-4.2 6.2-22.2z"/><path class="polygon-down--light" fill="#B7D02E" d="M103.4 204l-1.4 4-9.6 10.6-7.7-6.3v9.9l-11.9 4.2L49.1 204z"/><path class="polygon-down--dark" fill="#83AA08" d="M49.1 204H47l5 10h7.7z"/><path class="polygon-down--dark" fill="#83AA08" d="M84.7 222.2v-9.9l7.7 6.2-1.9 2.4z"/><path class="polygon-down--dark" fill="#83AA08" d="M122.4 204h-4.1l9.9 28.2 18.8-3.8z"/><path class="polygon-down--dark" fill="#83AA08" d="M207.1 246.2l11.1-10.4 6.8 14.6z"/></g><g><path class="polygon-up--light" fill="#B7D02E" d="M122.4 202l53-53.2 31.7 9.8 11.1 10.3 6.8-14.7 21.7 20 6.9 4.9 6.2 22.9z"/><path class="polygon-up--light" fill="#B7D02E" d="M103.4 202l-1.4-4.7-9.6-10.9-7.7 5.8v-9.8l-11.9-3.5L49.1 202z"/><path class="polygon-up--dark" fill="#83AA08" d="M49.1 202H47l5-10h7.5z"/><path class="polygon-up--dark" fill="#83AA08" d="M84.7 182.4v9.8l7.7-6-1.9-2.6z"/><path class="polygon-up--dark" fill="#83AA08" d="M122.4 202h-4.1l9.9-28.8 18.8 4.1z"/><path class="polygon-up--dark" fill="#83AA08" d="M207.1 158.3l11.1 10.4 6.8-14.6z"/></g></svg>
    </header>
    <h1 class="grid__row hero__caption">
      <span class="hero__text">
        <span class="hero__word"><span class="hero__word__inner delay500">Crafting</span></span> <span class="hero__word"><span class="hero__word__inner delay600">digital</span></span> <span class="hero__word"><span class="hero__word__inner delay700">experiences</span></span> <span class="hero__word"><span class="hero__word__inner delay800">with</span></span> <span class="hero__word"><span class="hero__word__inner delay900">cutting</span></span> <span class="hero__word"><span class="hero__word__inner delay1000">edge</span></span> <span class="hero__word"><span class="hero__word__inner delay1100">technologies.</span></span>
      </span>
    </h1>
  </div>
  <nav class="grid hero__nav js-hero-nav nav delay1300">
    <div class="grid__row--wide">
      <ul class="nav__list grid__row--wide__normal">
        <li class="nav__item--logo">
            <a href="/" class="nav__logo-clean js-nav-home" title="Back to Home page">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="29.5 357.6 133.6 67.6" enable-background="new 29.5 357.6 133.6 67.6"><g opacity=".4"><path class="polygon polygon-down--light" d="M76.8 392.3l33.3 32.9 19.9-6.4 7-6.5 4.2 9.1 13.6-12.6 4.4-2.6 3.9-13.9z"/><path class="polygon polygon-down--light" d="M64.9 392.3l-.9 2.5-6 6.6-4.8-3.9v6.2l-7.5 2.6-14.9-14z"/><path class="polygon polygon-down--dark" d="M30.8 392.3h-1.3l3.1 6.2h4.9z"/><path class="polygon polygon-down--dark" d="M53.2 403.7v-6.2l4.8 3.9-1.2 1.5z"/><path class="polygon polygon-down--dark" d="M76.8 392.3h-2.5l6.2 17.7 11.8-2.4z"/><path class="polygon polygon-down--dark" d="M130 418.7l7-6.5 4.2 9.2z"/></g><path class="polygon polygon-up--light" d="M76.8 391l33.3-33.4 19.9 6.2 7 6.4 4.2-9.2 13.6 12.6 4.4 3 3.9 14.4z"/><path class="polygon polygon-up--light" d="M64.9 391l-.9-2.9-6-6.9-4.8 3.7v-6.2l-7.5-2.2L30.8 391z"/><path class="polygon polygon-up--dark" d="M30.8 391h-1.3l3.1-6.3h4.7z"/><path class="polygon polygon-up--dark" d="M53.2 378.7v6.2l4.8-3.8-1.2-1.6z"/><path class="polygon polygon-up--dark" d="M76.8 391h-2.5l6.2-18.1 11.8 2.6z"/><path class="polygon polygon-up--dark" d="M130 363.6l7 6.5 4.2-9.2z"/></svg>
            </a>
        </li><!-- Remove space
        --><li class="nav__item">
            <a class="nav__link nav__link--work js-nav-link" href="/work/" title="Explore our work"><span>Our </span>Work</a>
        </li><!-- Remove space
        --><li class="nav__item">
            <a class="nav__link nav__link--about js-nav-link" href="/about/" title="Learn more about us">About <span>Us</span></a>
        </li><!-- Remove space
        --><li class="nav__item nav__item--show-on-bp2">
            <a class="nav__link js-nav-link" href="/blog/" title="Read our blog">Blog</a>
        </li><!-- Remove space
        --><li class="nav__item">
            <a class="nav__link nav__link--contact js-nav-link" href="/contact/" title="Say hello">Contact</a>
        </li>
      </ul>
      <div class="grid__row--wide__content hero__nav__wide-logo">
        <a href="/" class="nav__logo-clean js-nav-home" title="Back to Home page">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="29.5 357.6 133.6 67.6" enable-background="new 29.5 357.6 133.6 67.6"><g opacity=".4"><path class="polygon polygon-down--light" d="M76.8 392.3l33.3 32.9 19.9-6.4 7-6.5 4.2 9.1 13.6-12.6 4.4-2.6 3.9-13.9z"/><path class="polygon polygon-down--light" d="M64.9 392.3l-.9 2.5-6 6.6-4.8-3.9v6.2l-7.5 2.6-14.9-14z"/><path class="polygon polygon-down--dark" d="M30.8 392.3h-1.3l3.1 6.2h4.9z"/><path class="polygon polygon-down--dark" d="M53.2 403.7v-6.2l4.8 3.9-1.2 1.5z"/><path class="polygon polygon-down--dark" d="M76.8 392.3h-2.5l6.2 17.7 11.8-2.4z"/><path class="polygon polygon-down--dark" d="M130 418.7l7-6.5 4.2 9.2z"/></g><path class="polygon polygon-up--light" d="M76.8 391l33.3-33.4 19.9 6.2 7 6.4 4.2-9.2 13.6 12.6 4.4 3 3.9 14.4z"/><path class="polygon polygon-up--light" d="M64.9 391l-.9-2.9-6-6.9-4.8 3.7v-6.2l-7.5-2.2L30.8 391z"/><path class="polygon polygon-up--dark" d="M30.8 391h-1.3l3.1-6.3h4.7z"/><path class="polygon polygon-up--dark" d="M53.2 378.7v6.2l4.8-3.8-1.2-1.6z"/><path class="polygon polygon-up--dark" d="M76.8 391h-2.5l6.2-18.1 11.8 2.6z"/><path class="polygon polygon-up--dark" d="M130 363.6l7 6.5 4.2-9.2z"/></svg>
        </a>
      </div>
    </div>
  </nav>
</section>


		<main class="main-content js-pjax-container">
				<article class="post grid u--pad-both pjax-animate">
	<section class="grid__row">
		<span class="post__date">13 March 2015</span>
		<h1 id="transitioning-from-greensock-gsap-to-webnbspanimations">Transitioning from GreenSock GSAP to Web Animations</h1>

<p><strong>We recently got a chance to work with the new Web Animations specification when building this year’s <a href="/work/google-santa-tracker/">Google Santa Tracker</a>. We normally use GreenSock GSAP for complex animation sequences so we were interested to see if the standards are catching up.</strong></p>

<p><em><strong>Please note</strong> that the <a href="http://w3c.github.io/web-animations/">Web Animations specification</a> is very much a <a href="https://github.com/w3c/web-animations/commits/master">work in progress</a> so things may have changed since this post was written.</em></p>

<h2 id="background">Background</h2>
<p>There are many <a href="http://greensock.com/why-gsap/">reasons to use GSAP</a> — even <a href="https://developers.google.com/web/fundamentals/look-and-feel/animations/css-vs-javascript">Google recommends</a> it. For complex scenarios, we need to be able to create animations purely in JavaScript. Preferably, they should run as efficiently as any CSS Animation or CSS Transition, and that’s exactly <a href="https://www.polymer-project.org/0.5/platform/web-animations.html#why-web-animations">why there’s a new animation specification</a> in town. </p>

<p>At the time of writing only Chrome and Opera has native support for Web Animations. There’s an <a href="https://github.com/web-animations/web-animations-js">official polyfill</a> which works on modern versions of all major browsers.</p>

<h2 id="tweening">Tweening</h2>
<p>Let’s compare some common animation tasks using both frameworks. The most basic animation is to tween an object’s properties from state A to state B. </p>

<p><em><strong>Tip:</strong> to get the best performance possible we should <a href="http://csstriggers.com/">avoid properties</a> that cause a <code>layout</code> or <code>paint</code>, so that the GPU can carry out the work.</em></p>

<h3 id="basic-gsap-tween">Basic GSAP tween</h3>
<p>GSAP can tween any CSS property or DOM attribute, and uses a plugin architecture so you can load only the parts of the framework that you need. </p>

<p>The fastest way to get started is to use the <code>to()</code> method which  automatically tweens the property from whatever it happens to be at the time the tween begins.</p>

<figure class="js-component-code-pen-embed-on-scroll codepen-embed grid__row--wide u--margin-both--half " style="height: 160px" data-slug="xbybpZ" data-ratio="" data-height="160" data-tab="js">
  <div class="codepen-embed__content "></div>
	<noscript>See the Pen <a href="http://codepen.io/14islands/pen/xbybpZ/">xbybpZ</a> by 14islands (<a href="http://codepen.io/14islands">@14islands</a>) on <a href="http://codepen.io">CodePen</a>.</noscript>
</figure>

<p>The <code>x-</code>property tells the <a href="http://greensock.com/docs/#/HTML5/GSAP/Plugins/CSSPlugin/">CSS plugin</a> to move the element using <code>matrix()</code> or <code>translate()</code> 2D transforms.</p>

<p>GSAP has most common easing functions <a href="http://greensock.com/docs/#/HTML5/GSAP/Easing/">built in</a> and there are also <code>from()</code> and <code>fromTo()</code> functions for more control. You can force <code>matrix3d()</code> or <code>translate3d()</code> using the <a href="http://greensock.com/docs/#/HTML5/GSAP/Plugins/CSSPlugin/">force3D</a> flag  to make the browser put that element onto its own compositor layer (<a href="http://wesleyhales.com/blog/2013/10/26/Jank-Busting-Apples-Home-Page/">use sparingly</a>). </p>

<p><em><strong>Note:</strong> GSAP even lets you define properties that are not generally tweenable and will apply the property for you like position:”absolute” and display:”none”.</em></p>

<h3 id="basic-web-animations-tween">Basic Web Animations tween</h3>
<p>Web Animations also supports tweening any CSS property or DOM attribute, but you need to specify values for both the start keyframe and the end keyframe. You can provide <a href="https://github.com/14islands/14islands-com/blob/master/app/_scss/base/_easings.scss">custom easings</a> using bezier curves (same as CSS easing).</p>

<p>This example is the most basic way of applying an animation directly on a DOM element.</p>

<figure class="js-component-code-pen-embed-on-scroll codepen-embed grid__row--wide u--margin-both--half " style="height: 310px" data-slug="RNeNoV" data-ratio="" data-height="310" data-tab="js">
  <div class="codepen-embed__content "></div>
	<noscript>See the Pen <a href="http://codepen.io/14islands/pen/RNeNoV/">RNeNoV</a> by 14islands (<a href="http://codepen.io/14islands">@14islands</a>) on <a href="http://codepen.io">CodePen</a>.</noscript>
</figure>

<p>One thing to watch out for is the <code>fill</code> mode. By default, Web Animations fill mode is set to <code>none</code> which means the element resets to whatever state it had before the animation. Setting it to <code>forwards</code> makes it keep the last keyframe state. Again, this behaves just like the CSS Animations counterpart.</p>

<h2 id="synchronizing-tweens--timeline-controls">Synchronizing tweens &amp; Timeline controls</h2>
<p>Both GSAP and Web Animations have timeline abstractions to help synchronize tweens. You can queue tweens on the timeline in sequence, in parallel and make them overlap.</p>

<h3 id="gsap-timeline">GSAP timeline</h3>
<p>The GSAP Timeline lets you add tweens, callbacks and labels with exact control of the timing offset between them. By default, tweens are added to the timeline in sequential order.</p>

<figure class="js-component-code-pen-embed-on-scroll codepen-embed grid__row--wide u--margin-both--half " style="height: 333px" data-slug="MYPwww" data-ratio="" data-height="333" data-tab="js">
  <div class="codepen-embed__content "></div>
	<noscript>See the Pen <a href="http://codepen.io/14islands/pen/MYPwww/">MYPwww</a> by 14islands (<a href="http://codepen.io/14islands">@14islands</a>) on <a href="http://codepen.io">CodePen</a>.</noscript>
</figure>

<p>The <code>timeline</code> instance can be used to control all tweens by pausing, reversing, seeking and changing playback rate.</p>

<h3 id="web-animations-timeline">Web Animations timeline</h3>
<p>Web Animations lets you create and combine AnimationSequences and AnimationGroups to synchronize the timing of individual tweens. They can be nested inside each other to create complex animations. A player must be created to play the outermost sequence/group.</p>

<figure class="js-component-code-pen-embed-on-scroll codepen-embed grid__row--wide u--margin-both--half " style="height: 555px" data-slug="vEVOXr" data-ratio="" data-height="555" data-tab="js">
  <div class="codepen-embed__content "></div>
	<noscript>See the Pen <a href="http://codepen.io/14islands/pen/vEVOXr/">vEVOXr</a> by 14islands (<a href="http://codepen.io/14islands">@14islands</a>) on <a href="http://codepen.io">CodePen</a>.</noscript>
</figure>

<p>The Web Animations player also supports pausing, reversing, seeking and changing playback rate.</p>

<h2 id="events-and-callbacks">Events and Callbacks</h2>
<p>In one of the trickier scenes in this year’s Santa Tracker we had to animate random characters traveling on a conveyor belt.  Half-way through their journey they would enter a magic closet that dressed them in a random color.</p>

<h3 id="gsap-callback">GSAP callback</h3>
<p>The GSAP implementation of this use case is pretty straight forward thanks to the <code>TimelineLite.add()</code> function which can synchronize JavaScript callbacks alongside tweens.</p>

<figure class="js-component-code-pen-embed-on-scroll codepen-embed grid__row--wide u--margin-both--half " style="height: 550px" data-slug="dPgOdK" data-ratio="" data-height="550" data-tab="js">
  <div class="codepen-embed__content "></div>
	<noscript>See the Pen <a href="http://codepen.io/14islands/pen/dPgOdK/">dPgOdK</a> by 14islands (<a href="http://codepen.io/14islands">@14islands</a>) on <a href="http://codepen.io">CodePen</a>.</noscript>
</figure>

<p>GSAP also provides handy <code>onStart</code>, <code>onUpdate</code>, <code>onComplete</code> and <code>onReverseComplete</code> callbacks on both the Timeline and on individual Tweens.</p>

<h3 id="web-animations-callback">Web Animations callback</h3>
<p>This is where it gets a bit tricky. Web Animations only gives us a <code>finish</code> event on the player instance.</p>

<p>To schedule callbacks at a specific time during an animation, you need to manually <a href="https://github.com/web-animations/web-animations-js/issues/20">wrap your callback in an animation</a> and make sure it runs only once:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">myCallback</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Animation</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tf</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">tf</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Run callback here!&#39;</span><span class="p">);</span>
<span class="p">},</span> <span class="p">{</span> <span class="nx">duration</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">fill</span><span class="o">:</span> <span class="s1">&#39;forwards&#39;</span> <span class="p">});</span></code></pre></div>

<p>The equivalent of the above GSAP animation sequence ends up looking like this with Web Animations:</p>

<figure class="js-component-code-pen-embed-on-scroll codepen-embed grid__row--wide u--margin-both--half " style="height: 840px" data-slug="pvxRWd" data-ratio="" data-height="840" data-tab="js">
  <div class="codepen-embed__content "></div>
	<noscript>See the Pen <a href="http://codepen.io/14islands/pen/pvxRWd/">pvxRWd</a> by 14islands (<a href="http://codepen.io/14islands">@14islands</a>) on <a href="http://codepen.io">CodePen</a>.</noscript>
</figure>

<p>You are probably wondering why we bind the <code>finish</code> event like that. The latest version of the <a href="http://w3c.github.io/web-animations/#promise-objects">spec.</a> mentions that the event has been removed and that it should expose <code>ready</code> and <code>finished</code> promises instead. There’s an open <a href="https://github.com/web-animations/web-animations-js/issues/17">issue for the polyfill</a> tracking this.</p>

<p>Until this has been implemented everywhere, we need to do something like this to be future proof:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">finish</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">player</span><span class="p">.</span><span class="nx">finished</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">player</span><span class="p">.</span><span class="nx">finished</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">player</span><span class="p">.</span><span class="nx">onfinish</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>  <span class="c1">// or something to concat methods</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>If you need to do a lot of work with JavaScript callbacks, there’s an <a href="https://github.com/samthor/animation-callback">AnimationCallback class</a> from <a href="https://github.com/samthor">Sam Thorogood</a> that is worth checking out.</p>

<p>We would love to see more events and easier scheduling of callbacks added to the spec.</p>

<h2 id="summary">Summary</h2>

<p>It turns out that Web Animations was a pretty good fit for <a href="/work/google-santa-tracker/">the project</a>, and we had a lot of fun working with it. It’s more mature than we thought, but it’s definitely a bit rough around the edges.</p>

<p><strong>Things to watch out for:</strong></p>

<ul>
  <li>The Web Animations syntax is very verbose compared to GSAP.</li>
  <li>The way we found to schedule JavaScript callbacks with Web Animations feels like a hack.</li>
  <li>It’s not clear if Web Animations players are cheap to create, or if we should be recycling them.</li>
  <li>The <code>finish</code> event/promise is in flux.</li>
  <li>It’s confusing to have <a href="https://github.com/web-animations/web-animations-js#different-build-targets">3 versions of the polyfill</a>
    <ul>
      <li>We ran into different bugs using different polyfill versions.</li>
      <li>It can be hard to keep track of which polyfill version is being used on your project. <a href="https://github.com/Polymer/core-animation/commit/ff06630b1b280fa1245b9f4f366a76c92c8d325a">Polymer is currently shipped</a> with the <code>next-lite</code> polyfill.</li>
    </ul>
  </li>
  <li>Web Animations gives you fine-grained control of the animation <code>fill-mode</code>. This is powerful but can get complicated as <a href="https://www.polymer-project.org/0.5/platform/web-animations.html#controlling-the-animation-timing">this example illustrates</a>.</li>
</ul>

<p><em>There’s a lot of advanced functionality in GSAP that probably won’t be covered by Web Animations, but at least we will have a native choice going forward. And GSAP should be able to optimize its engine even further by taking animations entirely off the main JavaScript thread.</em></p>

<h3 id="resources">Resources:</h3>

<ul>
  <li><a href="http://w3c.github.io/web-animations/">Web Animations Specification Draft</a></li>
  <li><a href="https://github.com/web-animations/web-animations-js">Official Web Animations polyfill</a></li>
  <li><a href="https://www.polymer-project.org/0.5/platform/web-animations.html">Polymer Web Animations documentation</a></li>
  <li><a href="https://github.com/samthor/animation-callback">AnimationCallback util for triggering JavaScript callbacks at given intervals with Web Animations</a></li>
</ul>

<div class="post__author u--pad-top">
	<img alt="David Lindkvist" data-src="/images/about/team-grid/double-David.jpg" class="post__author-image" />
<noscript>
  <img alt="David Lindkvist" src="/images/about/team-grid/double-David.jpg" class="post__author-image" />
</noscript>
	<span class="post__author-name"><strong>David Lindkvist</strong> <a href="https://twitter.com/ffdead" target="_blank">@ffdead</a></span>
	<span class="post__author-job-title">Creative web developer / Co-Founder at 14islands</span>
</div>


	</section>
</article>



	
"


	<section class="js-component-disqus-embed post-comments grid u--pad-bottom"
         data-disqus-shortname="14islands-com"
         data-disqus-identifier="/blog/2015/03/13/transitioning-to-web-animations-from-greensock-gsap/"
         data-disqus-expanded="false">


	<a href="#" data-disquss-count class="grid__row u-bg-bright" title="Show comments for post">
		<h4 class="post-comments__cta ">
			<span class="disqus-comment-count" data-disqus-identifier="/blog/2015/03/13/transitioning-to-web-animations-from-greensock-gsap/">Write a comment</span>
		</h4>
	</a>

	<div data-disquss-comments class="grid__row" id="disqus_thread"></div>
</section>





  



<section class="related-posts">
	<a class="related-posts__link grid u--default-v-padding u-bg-natt-dark" href="/blog/2015/03/12/wordpress-as-a-cms/">
		<div class="grid__row">
	    <p class="related-posts__label">Read Next</p>
	    <h2 class="related-posts__title">Lessons learned using WordPress as a CMS</h2>
	  </div>
	</a>
</section>


<footer class="grid footer u--pad-both">
  <div class="grid__row--wide">
    <div class="grid__row--wide__normal">
      <div class="footer__logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 286.5 345.5" enable-background="new 0 0 286.5 345.5"><g class="footer__logo-title"><path fill="#424242" d="M14.3 329.7H6.4v-46.4H0v-7.9h14.3v54.3z"/><path fill="#424242" d="M59.3 345.5h-7.9v-15.7H20.7v-8.4l22.3-46h7.9l-22.1 46.4h22.7v-30.7h7.9v30.7h6.4v7.9h-6.4v15.8z"/><path fill="#424242" d="M78.2 329.7h-6.4v-54.3h6.4v54.3zm0-62.1h-6.4v-6.4h6.4v6.4z"/><path fill="#424242" d="M100.8 330.6c-8 0-16.5-4.8-16.5-15.5v-1.8h6.4v1.1c0 7.4 5.2 10 10.1 10 6.6 0 10-3.2 10-9.4 0-5.8-3-9-10.4-11.1-6.9-1.7-14.8-5-14.8-14.8 0-9 5.8-14.3 15.6-14.3 4.1 0 7.8 1.3 10.5 3.6 3.1 2.7 4.8 6.8 4.8 11.8v1.8H110v-1.8c0-2.2-.6-9.2-8.8-9.2-5.9 0-9 2.6-9 7.9.1 6.1 5.7 7.8 9.4 8.9l.6.2c10.4 2.8 15.3 8.1 15.3 16.9 0 9.9-6.1 15.7-16.7 15.7z"/><path fill="#424242" d="M129.7 329.7h-6.4V254h6.4v75.7z"/><path fill="#424242" d="M152.1 330.6c-9.8 0-15.6-7.1-15.6-19.1v-17.9c0-17.1 10.9-18.9 15.6-18.9 5.4 0 9.7 2.4 12.2 6.8l.8-6.1h5v54.3h-5l-.7-6.1c-3.2 5.8-8.4 7-12.3 7zm1.3-49.7c-7 0-10.5 5.2-10.5 15.6v12.1c0 10.5 3.6 15.8 10.6 15.8 2.8 0 4.9-.8 6.5-2.4 2.4-2.4 3.7-6.9 3.7-13.4v-12.1c-.1-6.7-1.1-15.6-10.3-15.6z"/><path fill="#424242" d="M209 329.7h-6.4v-32.5c0-14.6-5.6-16.3-9.8-16.3-6.7 0-10.2 5.1-10.2 14.9v33.9h-6.4v-54.3h5l.8 6.4c2.5-4.6 6.9-7.1 12.3-7.1 9.8 0 14.7 6.1 14.7 18.2v36.8z"/><path fill="#424242" d="M230.2 330.6c-4.6 0-15.1-1.9-15.1-19.1v-17.9c0-5.7 1.5-18.9 15.1-18.9 4.9 0 8.9 2.2 11.3 6.1V254h6.4v75.7h-4.8l-.6-6.1c-2.5 4.5-6.8 7-12.3 7zm1.5-49.7c-4.7 0-10.2 2.8-10.2 16.3v11.4c0 10.6 3.4 15.8 10.3 15.8 2.7 0 4.7-.7 6.2-2.2 2.4-2.4 3.6-6.8 3.6-13.5v-11.4c-.1-11.3-3.1-16.4-9.9-16.4z"/><path fill="#424242" d="M269.8 330.6c-8 0-16.5-4.8-16.5-15.5v-1.8h6.4v1.1c0 7.4 5.2 10 10.1 10 6.6 0 10-3.2 10-9.4 0-5.8-3-9-10.4-11.1-6.9-1.7-14.8-5-14.8-14.8 0-9 5.8-14.3 15.6-14.3 4.1 0 7.8 1.3 10.5 3.6 3.1 2.7 4.8 6.8 4.8 11.8v1.8H279v-1.8c0-2.2-.6-9.2-8.8-9.2-5.9 0-9 2.6-9 7.9.1 6.1 5.7 7.8 9.4 8.9l.6.2c10.4 2.8 15.3 8.1 15.3 16.9 0 9.9-6.1 15.7-16.7 15.7z"/></g><g><circle fill="#424242" cx="142.9" cy="110.4" r="110.4"/><g opacity=".4"><g fill="#fff"><path d="M121 152.2l38.4 37.5 22.9-7.7 8-7.6 4.9 10.4 15.7-14.5 5.1-2.5 4.4-15.6z"/><path d="M107.3 152.2l-1 2.4-6.6 7.4-5.2-4.8v7.1l-9 3.6-17.4-15.7z"/></g><path fill="#8E8E8E" d="M68.1 152.2h-1.6l3.6 6h4.4z"/><path fill="#8E8E8E" d="M94.5 164.3v-7.1l5.2 4.6-1.2 1.6z"/><path fill="#8E8E8E" d="M121 152.2h-2.9l7.1 19.8 13.7-2.4z"/><path fill="#8E8E8E" d="M182.4 181.8l7.9-7.6 4.9 10.5z"/></g><g><g fill="#fff"><path d="M121 150.2l38.4-38.7 22.9 7 8 7.3 4.9-10.6 15.7 14.4 5.1 3.8 4.4 16.8z"/><path d="M107.3 150.2l-1-3.7-6.6-8-5.2 4.1v-7.1l-9-2.3-17.4 17z"/></g><path fill="#8E8E8E" d="M68.1 150.2h-1.6l3.6-7h5.2z"/><path fill="#8E8E8E" d="M94.5 135.5v7.1l5.2-4.2-1.2-2z"/><path fill="#8E8E8E" d="M121 150.2h-2.9l7.1-21.1 13.7 3.1z"/><path fill="#8E8E8E" d="M182.3 118.3l8 7.4 4.9-10.6z"/></g></g></svg>
      </div>
      <div class="footer__info">
        <p class="nano no-hyphens">
          We are a web development studio that cares deeply about creating great user experiences. 14islands was founded in 2011, though our roots in the web industry stretch back more than 15 years.
        </p>
        <p class="nano">
          <a href="mailto:hello@14islands.com">Say hello</a>
        </p>
      </div>
      <div class="footer__social">
        <nav class="footer__social-nav">
          <a class="nano" href="/blog/" target="_blank">Blog</a>
          <a class="nano" href="https://twitter.com/14islands" target="_blank">Twitter</a>
          <a class="nano" href="https://www.facebook.com/14islands" target="_blank">Facebook</a>
          <a class="nano" href="https://instagram.com/14islands" target="_blank">Instagram</a>
          <a class="nano" href="http://codepen.io/14islands/" target="_blank">Codepen</a>
        </nav>
      </div>
    </div>
    <div class="grid__row--wide__content">
      <div class="footer__logo footer__logo--wide-grid">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 286.5 345.5" enable-background="new 0 0 286.5 345.5"><g class="footer__logo-title"><path fill="#424242" d="M14.3 329.7H6.4v-46.4H0v-7.9h14.3v54.3z"/><path fill="#424242" d="M59.3 345.5h-7.9v-15.7H20.7v-8.4l22.3-46h7.9l-22.1 46.4h22.7v-30.7h7.9v30.7h6.4v7.9h-6.4v15.8z"/><path fill="#424242" d="M78.2 329.7h-6.4v-54.3h6.4v54.3zm0-62.1h-6.4v-6.4h6.4v6.4z"/><path fill="#424242" d="M100.8 330.6c-8 0-16.5-4.8-16.5-15.5v-1.8h6.4v1.1c0 7.4 5.2 10 10.1 10 6.6 0 10-3.2 10-9.4 0-5.8-3-9-10.4-11.1-6.9-1.7-14.8-5-14.8-14.8 0-9 5.8-14.3 15.6-14.3 4.1 0 7.8 1.3 10.5 3.6 3.1 2.7 4.8 6.8 4.8 11.8v1.8H110v-1.8c0-2.2-.6-9.2-8.8-9.2-5.9 0-9 2.6-9 7.9.1 6.1 5.7 7.8 9.4 8.9l.6.2c10.4 2.8 15.3 8.1 15.3 16.9 0 9.9-6.1 15.7-16.7 15.7z"/><path fill="#424242" d="M129.7 329.7h-6.4V254h6.4v75.7z"/><path fill="#424242" d="M152.1 330.6c-9.8 0-15.6-7.1-15.6-19.1v-17.9c0-17.1 10.9-18.9 15.6-18.9 5.4 0 9.7 2.4 12.2 6.8l.8-6.1h5v54.3h-5l-.7-6.1c-3.2 5.8-8.4 7-12.3 7zm1.3-49.7c-7 0-10.5 5.2-10.5 15.6v12.1c0 10.5 3.6 15.8 10.6 15.8 2.8 0 4.9-.8 6.5-2.4 2.4-2.4 3.7-6.9 3.7-13.4v-12.1c-.1-6.7-1.1-15.6-10.3-15.6z"/><path fill="#424242" d="M209 329.7h-6.4v-32.5c0-14.6-5.6-16.3-9.8-16.3-6.7 0-10.2 5.1-10.2 14.9v33.9h-6.4v-54.3h5l.8 6.4c2.5-4.6 6.9-7.1 12.3-7.1 9.8 0 14.7 6.1 14.7 18.2v36.8z"/><path fill="#424242" d="M230.2 330.6c-4.6 0-15.1-1.9-15.1-19.1v-17.9c0-5.7 1.5-18.9 15.1-18.9 4.9 0 8.9 2.2 11.3 6.1V254h6.4v75.7h-4.8l-.6-6.1c-2.5 4.5-6.8 7-12.3 7zm1.5-49.7c-4.7 0-10.2 2.8-10.2 16.3v11.4c0 10.6 3.4 15.8 10.3 15.8 2.7 0 4.7-.7 6.2-2.2 2.4-2.4 3.6-6.8 3.6-13.5v-11.4c-.1-11.3-3.1-16.4-9.9-16.4z"/><path fill="#424242" d="M269.8 330.6c-8 0-16.5-4.8-16.5-15.5v-1.8h6.4v1.1c0 7.4 5.2 10 10.1 10 6.6 0 10-3.2 10-9.4 0-5.8-3-9-10.4-11.1-6.9-1.7-14.8-5-14.8-14.8 0-9 5.8-14.3 15.6-14.3 4.1 0 7.8 1.3 10.5 3.6 3.1 2.7 4.8 6.8 4.8 11.8v1.8H279v-1.8c0-2.2-.6-9.2-8.8-9.2-5.9 0-9 2.6-9 7.9.1 6.1 5.7 7.8 9.4 8.9l.6.2c10.4 2.8 15.3 8.1 15.3 16.9 0 9.9-6.1 15.7-16.7 15.7z"/></g><g><circle fill="#424242" cx="142.9" cy="110.4" r="110.4"/><g opacity=".4"><g fill="#fff"><path d="M121 152.2l38.4 37.5 22.9-7.7 8-7.6 4.9 10.4 15.7-14.5 5.1-2.5 4.4-15.6z"/><path d="M107.3 152.2l-1 2.4-6.6 7.4-5.2-4.8v7.1l-9 3.6-17.4-15.7z"/></g><path fill="#8E8E8E" d="M68.1 152.2h-1.6l3.6 6h4.4z"/><path fill="#8E8E8E" d="M94.5 164.3v-7.1l5.2 4.6-1.2 1.6z"/><path fill="#8E8E8E" d="M121 152.2h-2.9l7.1 19.8 13.7-2.4z"/><path fill="#8E8E8E" d="M182.4 181.8l7.9-7.6 4.9 10.5z"/></g><g><g fill="#fff"><path d="M121 150.2l38.4-38.7 22.9 7 8 7.3 4.9-10.6 15.7 14.4 5.1 3.8 4.4 16.8z"/><path d="M107.3 150.2l-1-3.7-6.6-8-5.2 4.1v-7.1l-9-2.3-17.4 17z"/></g><path fill="#8E8E8E" d="M68.1 150.2h-1.6l3.6-7h5.2z"/><path fill="#8E8E8E" d="M94.5 135.5v7.1l5.2-4.2-1.2-2z"/><path fill="#8E8E8E" d="M121 150.2h-2.9l7.1-21.1 13.7 3.1z"/><path fill="#8E8E8E" d="M182.3 118.3l8 7.4 4.9-10.6z"/></g></g></svg>
      </div>
    </div>
  </div>
</footer>


		</main>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script>window.jQuery || document.write('<script src="/_bower_components/jquery/dist/jquery.min.js"><\/script>')</script>

<script src="//src.responsive.io/r.js"></script>

<script src="/js/footer-scripts.f52e.js"></script>

		<script>
  (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
  function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
  e=o.createElement(i);r=o.getElementsByTagName(i)[0];
  e.src='//www.google-analytics.com/analytics.js';
  r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
  ga('create','UA-31151822-1');ga('send','pageview');
</script>

	</body>
</html>
