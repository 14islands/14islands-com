!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function Events(){}function EE(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function EventEmitter(){this._events=new Events,this._eventsCount=0}var has=Object.prototype.hasOwnProperty,prefix="~";Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)has.call(e,t)&&n.push(prefix?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},EventEmitter.prototype.listeners=function(e,t){var n=prefix?prefix+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var s=0,i=r.length,o=new Array(i);s<i;s++)o[s]=r[s].fn;return o},EventEmitter.prototype.emit=function(e,t,n,r,s,i){var o=prefix?prefix+e:e;if(!this._events[o])return!1;var v,f,h=this._events[o],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,r),!0;case 5:return h.fn.call(h.context,t,n,r,s),!0;case 6:return h.fn.call(h.context,t,n,r,s,i),!0}for(f=1,v=new Array(c-1);f<c;f++)v[f-1]=arguments[f];h.fn.apply(h.context,v)}else{var p,a=h.length;for(f=0;f<a;f++)switch(h[f].once&&this.removeListener(e,h[f].fn,void 0,!0),c){case 1:h[f].fn.call(h[f].context);break;case 2:h[f].fn.call(h[f].context,t);break;case 3:h[f].fn.call(h[f].context,t,n);break;case 4:h[f].fn.call(h[f].context,t,n,r);break;default:if(!v)for(p=1,v=new Array(c-1);p<c;p++)v[p-1]=arguments[p];h[f].fn.apply(h[f].context,v)}}return!0},EventEmitter.prototype.on=function(e,t,n){var r=new EE(t,n||this),s=prefix?prefix+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],r]:this._events[s].push(r):(this._events[s]=r,this._eventsCount++),this},EventEmitter.prototype.once=function(e,t,n){var r=new EE(t,n||this,!0),s=prefix?prefix+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],r]:this._events[s].push(r):(this._events[s]=r,this._eventsCount++),this},EventEmitter.prototype.removeListener=function(e,t,n,r){var s=prefix?prefix+e:e;if(!this._events[s])return this;if(!t)return 0==--this._eventsCount?this._events=new Events:delete this._events[s],this;var i=this._events[s];if(i.fn)i.fn!==t||r&&!i.once||n&&i.context!==n||(0==--this._eventsCount?this._events=new Events:delete this._events[s]);else{for(var o=0,v=[],f=i.length;o<f;o++)(i[o].fn!==t||r&&!i[o].once||n&&i[o].context!==n)&&v.push(i[o]);v.length?this._events[s]=1===v.length?v[0]:v:0==--this._eventsCount?this._events=new Events:delete this._events[s]}return this},EventEmitter.prototype.removeAllListeners=function(e){var t;return e?(t=prefix?prefix+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new Events:delete this._events[t])):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,void 0!==module&&(module.exports=EventEmitter)},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var INTERNAUT_IDLE=exports.INTERNAUT_IDLE="idle",INTERNAUT_LOOK=exports.INTERNAUT_LOOK="look",INTERNAUT_IDLEHAPPY=exports.INTERNAUT_IDLEHAPPY="idlehappy",INTERNAUT_IDLESAD=exports.INTERNAUT_IDLESAD="idlesad",INTERNAUT_IDLESUPERSAD=exports.INTERNAUT_IDLESUPERSAD="idlesupersad",INTERNAUT_WIGGLE=exports.INTERNAUT_WIGGLE="wiggle",INTERNAUT_HAPPYTRIGGER=exports.INTERNAUT_HAPPYTRIGGER="happytrigger",INTERNAUT_SUPERHAPPYTRIGGER=exports.INTERNAUT_SUPERHAPPYTRIGGER="superhappytrigger",INTERNAUT_JUMP=exports.INTERNAUT_JUMP="jump",INTERNAUT_LANDING1=exports.INTERNAUT_LANDING1="landing1",INTERNAUT_LANDING2=exports.INTERNAUT_LANDING2="landing2",INTERNAUT_THROW=exports.INTERNAUT_THROW="throw",INTERNAUT_RUN=exports.INTERNAUT_RUN="run",INTERNAUT_RUN2=exports.INTERNAUT_RUN2="run2",INTERNAUT_CLIMB=exports.INTERNAUT_CLIMB="climb",INTERNAUT_CLIMBOUT=exports.INTERNAUT_CLIMBOUT="climbout",INTERNAUT_DRAGLEFT=exports.INTERNAUT_DRAGLEFT="dragleft",INTERNAUT_PUSHRIGHT=exports.INTERNAUT_PUSHRIGHT="pushright",INTERNAUT_ACTIVATE=exports.INTERNAUT_ACTIVATE="activate",INTERNAUT_PUTCARD=exports.INTERNAUT_PUTCARD="putcard",INTERNAUT_CORRECT=exports.INTERNAUT_CORRECT="correct",INTERNAUT_NEXTPLATFORM=exports.INTERNAUT_NEXTPLATFORM="nextplatform",INTERNAUT_SHIVER=exports.INTERNAUT_SHIVER="shiver",INTERNAUT_SHIVER2=exports.INTERNAUT_SHIVER2="shiver2",INTERNAUT_SWIM=exports.INTERNAUT_SWIM="swim",INTERNAUT_SWIMLEFT=exports.INTERNAUT_SWIMLEFT="swimleft",INTERNAUT_WRONGANSWER=exports.INTERNAUT_WRONGANSWER="wronganswer",INTERNAUT_BOUNCEWALL=exports.INTERNAUT_BOUNCEWALL="bouncewall",INTERNAUT_COLLECTING=exports.INTERNAUT_COLLECTING="collecting",INTERNAUT_LEANLEFT=exports.INTERNAUT_LEANLEFT="leanleft",INTERNAUT_LEANRIGHT=exports.INTERNAUT_LEANRIGHT="leanright",INTERNAUT_RUNJUMP=exports.INTERNAUT_RUNJUMP="runjump",INTERNAUT_RUNJUMP2=exports.INTERNAUT_RUNJUMP2="runjump2",INTERNAUT_REPORT=exports.INTERNAUT_REPORT="report",INTERNAUT_WRONGREPORTED=exports.INTERNAUT_WRONGREPORTED="wrongreported",INTERNAUT_ENDING_MM=exports.INTERNAUT_ENDING_MM="endingmm",INTERNAUT_ENDING_TOT=exports.INTERNAUT_ENDING_TOT="endingtot",INTERNAUT_ENDING_RR=exports.INTERNAUT_ENDING_RR="endingrr",INTERNAUT_ENDING_KK=exports.INTERNAUT_ENDING_KK="endingkk",BULLY_IDLE=exports.BULLY_IDLE="idle",BULLY_THROW=exports.BULLY_THROW="throw",BULLY_EMPRISONED=exports.BULLY_EMPRISONED="emprisoned",BULLY_LAUGH=exports.BULLY_LAUGH="laugh",BULLY_LAUGHANDPOINT=exports.BULLY_LAUGHANDPOINT="laughandpoint",BULLY_NOTICE=exports.BULLY_NOTICE="notice",BULLY_REPORTED=exports.BULLY_REPORTED="reported",SHOUTER_IDLE=exports.SHOUTER_IDLE="idle",SHOUTER_SPIN=exports.SHOUTER_SPIN="spin",SHOUTER_LAUGH=exports.SHOUTER_LAUGH="laugh",PHISHER_IDLE=exports.PHISHER_IDLE="idle",PHISHER_LAUGH=exports.PHISHER_LAUGH="laugh",PHISHER_WATER_IN=exports.PHISHER_WATER_IN="water_in",PHISHER_WATER_OUT=exports.PHISHER_WATER_OUT="water_out",PHISHER_YES=exports.PHISHER_YES="yes",PHISHER_NO=exports.PHISHER_NO="no",HACKER_IDLE=exports.HACKER_IDLE="idle",HACKER_RUN=exports.HACKER_RUN="run",HACKER_BOUNCEWALL=exports.HACKER_BOUNCEWALL="bouncewall",HACKER_STEAL=exports.HACKER_STEAL="steal",HACKER_LAUGH=exports.HACKER_LAUGH="laugh";exports.KK_CITIZEN="kk-citizen",exports.KK_PLAYER="kk-player",exports.MM_PLAYER="mm-player",exports.RR_PLAYER="rr-player",exports.TT_PLAYER="tt-player",exports.BULLY="bully",exports.PHISHER="phisher",exports.HACKER="hacker",exports.SHOUTER="shouter",exports.PRESETS={INTERNAUT_DEFAULT:[INTERNAUT_IDLE,INTERNAUT_LOOK,INTERNAUT_WIGGLE,INTERNAUT_WRONGREPORTED,INTERNAUT_SUPERHAPPYTRIGGER,INTERNAUT_REPORT,INTERNAUT_BOUNCEWALL],BULLY:[BULLY_IDLE,BULLY_THROW,BULLY_EMPRISONED,BULLY_LAUGH,BULLY_LAUGHANDPOINT,BULLY_NOTICE,BULLY_REPORTED],PHISHER:[PHISHER_IDLE,PHISHER_LAUGH,PHISHER_WATER_IN,PHISHER_WATER_OUT,PHISHER_YES,PHISHER_NO],HACKER:[HACKER_IDLE,HACKER_RUN,HACKER_BOUNCEWALL,HACKER_STEAL,HACKER_LAUGH],SHOUTER:[SHOUTER_IDLE,SHOUTER_SPIN,SHOUTER_LAUGH],KK_CITIZEN:[INTERNAUT_WIGGLE,INTERNAUT_IDLEHAPPY,INTERNAUT_IDLESAD,INTERNAUT_IDLESUPERSAD,INTERNAUT_HAPPYTRIGGER,INTERNAUT_SUPERHAPPYTRIGGER,INTERNAUT_WRONGREPORTED],KK_PLAYER:[INTERNAUT_WIGGLE,INTERNAUT_JUMP,INTERNAUT_RUNJUMP2,INTERNAUT_LANDING2,INTERNAUT_THROW,INTERNAUT_RUN,INTERNAUT_RUN2,INTERNAUT_HAPPYTRIGGER,INTERNAUT_REPORT],KK_ENDING_PLAYER:[INTERNAUT_ENDING_KK],MM_PLAYER:[INTERNAUT_DRAGLEFT,INTERNAUT_PUSHRIGHT,INTERNAUT_ACTIVATE,INTERNAUT_PUTCARD,INTERNAUT_CLIMB,INTERNAUT_ENDING_MM,INTERNAUT_SUPERHAPPYTRIGGER,INTERNAUT_CLIMBOUT],MM_CITIZEN:[INTERNAUT_SUPERHAPPYTRIGGER,INTERNAUT_HAPPYTRIGGER,INTERNAUT_IDLEHAPPY,INTERNAUT_IDLESAD,INTERNAUT_IDLESUPERSAD],MM_ENDING_PLAYER:[INTERNAUT_ENDING_MM],RR_PLAYER:[INTERNAUT_CORRECT,INTERNAUT_CLIMBOUT,INTERNAUT_HAPPYTRIGGER,INTERNAUT_SUPERHAPPYTRIGGER,INTERNAUT_NEXTPLATFORM,INTERNAUT_SHIVER,INTERNAUT_SHIVER2,INTERNAUT_SWIM,INTERNAUT_SWIMLEFT,INTERNAUT_WRONGANSWER,INTERNAUT_WIGGLE,INTERNAUT_ENDING_RR],TT_PLAYER:[INTERNAUT_RUN2,INTERNAUT_BOUNCEWALL,INTERNAUT_COLLECTING,INTERNAUT_LEANLEFT,INTERNAUT_LEANRIGHT,INTERNAUT_RUNJUMP,INTERNAUT_RUNJUMP2,INTERNAUT_JUMP,INTERNAUT_HAPPYTRIGGER,INTERNAUT_ENDING_TOT],CHARACTER_STUDIO_INTERNAUT:[INTERNAUT_IDLE,INTERNAUT_LOOK,INTERNAUT_IDLEHAPPY,INTERNAUT_IDLESAD,INTERNAUT_IDLESUPERSAD,INTERNAUT_WIGGLE,INTERNAUT_HAPPYTRIGGER,INTERNAUT_SUPERHAPPYTRIGGER,INTERNAUT_WRONGREPORTED,INTERNAUT_JUMP,INTERNAUT_LANDING1,INTERNAUT_LANDING2,INTERNAUT_THROW,INTERNAUT_REPORT,INTERNAUT_RUN,INTERNAUT_RUN2,INTERNAUT_CLIMB,INTERNAUT_CLIMBOUT,INTERNAUT_DRAGLEFT,INTERNAUT_PUSHRIGHT,INTERNAUT_ACTIVATE,INTERNAUT_PUTCARD,INTERNAUT_CORRECT,INTERNAUT_NEXTPLATFORM,INTERNAUT_SHIVER,INTERNAUT_SHIVER2,INTERNAUT_SWIM,INTERNAUT_SWIMLEFT,INTERNAUT_WRONGANSWER,INTERNAUT_BOUNCEWALL,INTERNAUT_COLLECTING,INTERNAUT_LEANLEFT,INTERNAUT_LEANRIGHT,INTERNAUT_RUNJUMP,INTERNAUT_RUNJUMP2,INTERNAUT_ENDING_MM,INTERNAUT_ENDING_RR,INTERNAUT_ENDING_TOT,INTERNAUT_ENDING_KK]}},{}],3:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnimationState=exports.CharacterType=void 0;var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_globalAssets=require("./global-assets"),_globalAssets2=_interopRequireDefault(_globalAssets),_libMaterial=require("./lib-material"),_libMaterial2=_interopRequireDefault(_libMaterial),_animations=require("./animations"),Animations=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(_animations),_replaceMaterial=require("./replace-material"),_replaceMaterial2=_interopRequireDefault(_replaceMaterial),_query=require("./query"),_query2=_interopRequireDefault(_query),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),CharacterType=exports.CharacterType={INTERNAUT:"internaut",BULLY:"bully",PHISHER:"phisher",SHOUTER:"shouter",HACKER:"hacker"},AnimationState=exports.AnimationState={IDLE:"idle",FOLLOW_ICON:"followIcon",JUMP:"jump",CLIP:"clip",ANIMATED:"animated"},flatten=function e(t){return t.reduce(function(t,i){return t.concat(Array.isArray(i)?e(i):i)},[])},CharacterBase=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.useConvertGammaToLinear=!1,e.onClipAnimationComplete=e.onClipAnimationComplete.bind(e),e.onClipAnimationLoop=e.onClipAnimationLoop.bind(e),e.characterJSON=null,e.randomSeed=5e3*Math.random(),e.currentIdleName="idle",e.isCrossFading=!1,e.animationList=new Set,e.rig={},e.timeScale=.6,e.shouldLookAt=!1,e.upX=new THREE.Vector3(1,0,0),e.upMinusX=new THREE.Vector3(-1,0,0),e.upZ=new THREE.Vector3(0,0,1),e.upMinusZ=new THREE.Vector3(0,0,-1),e.upY=new THREE.Vector3(0,1,0),e.upMinusY=new THREE.Vector3(0,-1,0),e.tempVector3=new THREE.Vector3,e.tempWorldPos=new THREE.Vector3,e.tempWorldPos2=new THREE.Vector3,e.lastPosition=new THREE.Vector3,e.velocity=new THREE.Vector3,e.lookAtPosition=new THREE.Vector3,e.currentAnimation=null,e.canBlink=!0,e.nextBlink=Date.now()+e.randomSeed+300,e.blinkStart=0,e.isBlinking=!1,e.slidingAlongWall=0,e.tempQuaternion=new THREE.Quaternion,e.interpolateQuaternion=new THREE.Quaternion,e.randomJumpFactor=0;var i=new THREE.Object3D;return e.lookAtObject=i,e}return _inherits(t,e),_createClass(t,[{key:"parseConfigAnimationKeys",value:function(e){var t=this,i=[];e&&i.push(e),flatten(i).forEach(function(e){t.animationList.add(e)})}},{key:"setState",value:function(e){this.animationState=e}},{key:"createMesh",value:function(){for(var e=new THREE.ObjectLoader,t=0;t<this.characterJSON.materials[0].materials.length;t++){var i=this.characterJSON.materials[0].materials;(0,_replaceMaterial2.default)(i[t],{skinning:!0,fresnelPower:3,fresnelIntensity:.2})}var n=e.parse(this.characterJSON);n.children[0].geometry.computeFlatVertexNormals(),n.children[0].geometry.sortFacesByMaterialIndex(),this.skinnedMesh=n.children[0],_query2.default.style&&"indie"===_query2.default.style||this.setColors(),this.mixer=new THREE.AnimationMixer(this.skinnedMesh),this.mixer.addEventListener("finished",this.onClipAnimationComplete),this.mixer.addEventListener("loop",this.onClipAnimationLoop),this.initAnimations(n.children[0]),this.mesh=new THREE.Object3D,this.mesh.add(this.skinnedMesh),this.skinnedMesh.scale.set(.45,.45,.45),this.skinnedMesh.castShadow=!0,this.skinnedMesh.receiveShadow=!0,this.initRig(),this.createEyes()}},{key:"createEyes",value:function(){var e=this;_libMaterial2.default.has("eyes")||_libMaterial2.default.add("eyes",new THREE.MeshBasicMaterial({color:_query2.default&&"indie"===_query2.default.style?16777215:0})),this.skinnedMesh.traverse(function(t){if(-1!==t.name.toLowerCase().indexOf("eye")&&-1===t.name.indexOf("eyeLid")){var i=new THREE.Mesh(new THREE.CircleGeometry(e.characterType===CharacterType.INTERNAUT?2.5:3.5,10,0,2*Math.PI),_libMaterial2.default.get("eyes"));e.characterType===CharacterType.HACKER?(i.rotation.x+=.96*Math.PI,i.position.z-=3,i.position.x-=.6):(i.rotation.x+=Math.PI,i.position.z-=1),t.add(i)}})}},{key:"setColors",value:function(e){_query2.default.style&&"replaced"===_query2.default.style||(this.skinnedMesh.material.materials[0].color.setHex(this.colorScheme.mainColor),this.skinnedMesh.material.materials[0].emissive.setHex(this.colorScheme.mainEmissive),this.skinnedMesh.material.materials[1].color.setHex(this.colorScheme.secondaryColor),this.skinnedMesh.material.materials[1].emissive.setHex(this.colorScheme.secondaryEmissive))}},{key:"onClipAnimationStart",value:function(){}},{key:"onClipAnimationComplete",value:function(e){if(e.action.name!==this.currentAnimation.name)return!1;if(this.currentAnimation.returnToIdle){this.animationState=AnimationState.IDLE;var t=this.currentAnimation;TweenMax.to(this.currentAnimation,.2,{weight:0,onComplete:function(e){t.time=0}}),this.triggerAnimation(this.currentIdleName||"idle")}this.emit("animationCompleted",e)}},{key:"onClipAnimationLoop",value:function(e){}},{key:"initAnimations",value:function(e){var t=this;this.animationList.forEach(function(i){var n=t.characterType+"_anim_"+i,a=void 0;_globalAssets2.default.hasAnimation(n)?a=_globalAssets2.default.getAnimation(n):(a=THREE.AnimationClip.parseAnimation(_globalAssets2.default.getJSON(n)[0],e.geometry.bones),_globalAssets2.default.addAnimation(n,a)),e.geometry.animations||(e.geometry.animations=[]),e.geometry.animations=e.geometry.animations.concat(a);var s=t.mixer.clipAction(a);s.name=s.getClip().name,s.loop=!1,s.weight=0,s.setEffectiveWeight(0),s.repetitions=0,s.clampWhenFinished=!0,-1===i.indexOf("idle")&&i!==Animations.INTERNAUT_SWIM||(s.time=0,s.weight=0,s.loop=THREE.LoopRepeat,s.repetitions=THREE.Infinity)})}},{key:"initRig",value:function(){for(var e=0;e<this.skinnedMesh.skeleton.bones.length;e++)"RIG:root_JNT"===this.skinnedMesh.skeleton.bones[e].name&&(this.rig.root=this.skinnedMesh.skeleton.bones[e]),"RIG:head_JNT"===this.skinnedMesh.skeleton.bones[e].name&&(this.rig.head=this.skinnedMesh.skeleton.bones[e]),"RIG:eye_L_JNT"===this.skinnedMesh.skeleton.bones[e].name&&(this.rig.leftEye=this.skinnedMesh.skeleton.bones[e]),"RIG:eye_R_JNT"===this.skinnedMesh.skeleton.bones[e].name&&(this.rig.rightEye=this.skinnedMesh.skeleton.bones[e]),"RIG:arm_L_JNT"===this.skinnedMesh.skeleton.bones[e].name&&(this.rig.leftArm=this.skinnedMesh.skeleton.bones[e]),"RIG:arm_R_JNT"===this.skinnedMesh.skeleton.bones[e].name&&(this.rig.rightArm=this.skinnedMesh.skeleton.bones[e]),"RIG:leg_R_JNT"===this.skinnedMesh.skeleton.bones[e].name&&(this.rig.rightLeg=this.skinnedMesh.skeleton.bones[e]),"RIG:leg_L_JNT"===this.skinnedMesh.skeleton.bones[e].name&&(this.rig.leftLeg=this.skinnedMesh.skeleton.bones[e]);this.rig.leftArm.up=this.upMinusY,this.rig.rightArm.up=this.upMinusY,this.rig.head.up=this.upMinusZ}},{key:"update",value:function(e){this.now=Date.now()+this.randomSeed,this.mixer.update(e),this.canBlink&&(this.nextBlink<this.now&&!this.isBlinking&&(this.rig.leftEye?(this.rig.leftEye.scale.y=.1,this.rig.rightEye.scale.y=.1):this.rig.eye&&(this.rig.eye.scale.y=.1),this.isBlinking=!0,this.blinkStart=this.now),this.isBlinking&&this.blinkStart+100<this.now&&(this.isBlinking=!1,this.rig.leftEye?(this.rig.leftEye.scale.y=1,this.rig.rightEye.scale.y=1):this.rig.eye&&(this.rig.eye.scale.y=1),this.nextBlink=this.now+(Math.random()>.9?100:800+1800*Math.random()))),this.updateRig()}},{key:"updateRig",value:function(){}},{key:"updateLookAt",value:function(e){this.lookAtObject=e}},{key:"triggerAnimation",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i=Object.assign({clampWhenFinished:!0,returnToIdle:!0,crossfade:!0,fadeDuration:.2,timeScale:1,time:0},i);var n=void 0;if(i.crossfade&&(this.currentAnimation||this.animationState===AnimationState.IDLE)){var a=void 0;if(a=this.currentAnimation?this.currentAnimation.name:this.currentIdleName||"idle",n=this.mixer.clipAction(e),n.timeScale=i.timeScale,a!==e){this.isCrossFading=!0,n.weight=1,n.time=i.time,n.play(),n.enabled=!0,n.paused=!1;var s=this.mixer.clipAction(a);s.fadeOut(i.fadeDuration),n.fadeIn(i.fadeDuration),TweenMax.delayedCall(i.fadeDuration,function(e){t.isCrossFading=!1,s.time=0})}else n.weight=1,n.time=i.time,n.play(),n.enabled=!0,n.paused=!1}else this.mixer.stopAllAction(),this.currentAnimation&&(this.currentAnimation.weight=0),n=this.mixer.clipAction(e),n.weight=1,n.time=i.time,n.play();return TweenMax.killTweensOf(this.currentAnimation),this.animationState=-1===e.indexOf("idle")?AnimationState.CLIP:AnimationState.IDLE,this.currentAnimation=n,this.onClipAnimationStart(this.currentAnimation),Object.assign(this.currentAnimation,i),this.currentAnimation}},{key:"warp",value:function(e,t,i){this.mixer.stopAllAction();var n=this.play(e,1),a=this.play(t,1);n.crossFadeTo(a,i,!0)}},{key:"applyWeight",value:function(e,t){this.mixer.clipAction(e).setEffectiveWeight(t)}},{key:"getWeight",value:function(e){return this.mixer.clipAction(e).getEffectiveWeight()}},{key:"stopAll",value:function(){this.mixer.stopAllAction()}},{key:"lerpAngle",value:function(e,t,i){return Math.abs(t-e)>Math.PI&&(t>e?e+=2*Math.PI:t+=2*Math.PI),e+=(t-e)*i,e>=2*Math.PI&&(e=e%Math.PI*2),e}},{key:"dispose",value:function(){this.skinnedMesh.geometry.dispose(),this.mixer.removeEventListener("finished",this.onClipAnimationComplete),this.mixer.removeEventListener("loop",this.onClipAnimationLoop),this.mixer=null}}]),t}(_eventemitter2.default);exports.default=CharacterBase},{"./animations":2,"./global-assets":4,"./lib-material":7,"./query":11,"./replace-material":12,eventemitter3:1}],4:[function(require,module,exports){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_eventemitter=require("eventemitter3"),_eventemitter2=function(e){return e&&e.__esModule?e:{default:e}}(_eventemitter),GlobalAssets=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return console.log("created global assets class"),e.isLoaded=!1,e.library={},e.library.materials=new Map,e.library.json=new Map,e.library.animations=new Map,e.library.fonts=new Map,e}return _inherits(t,e),_createClass(t,[{key:"getFont",value:function(e){return this.library.fonts.has(e)?this.library.fonts.get(e):(console.warn("can't find Font with id: "+e),null)}},{key:"getJSON",value:function(e){return this.library.json.has(e)?this.library.json.get(e):(console.warn("can't find JSON with id: "+e),null)}},{key:"addJSON",value:function(e){this.isLoaded=!0;for(var t in e)this.library.json.set(t,e[t]),t.includes("font")&&this.library.fonts.set(t,new THREE.Font(e[t]))}},{key:"addMaterial",value:function(e,t){this.library.materials.set(e,t)}},{key:"getMaterial",value:function(e){return this.library.materials.has(e)?this.library.materials.get(e):null}},{key:"addAnimation",value:function(e,t){this.library.animations.set(e,t)}},{key:"getAnimation",value:function(e){return this.library.animations.has(e)?this.library.animations.get(e):null}},{key:"clearAnimations",value:function(){this.library.animations.clear()}},{key:"hasAnimation",value:function(e){return this.library.animations.has(e)}},{key:"dispose",value:function(){this.library.materials.clear(),this.library.json.clear(),this.library.animations.clear()}}]),t}(_eventemitter2.default);exports.default=new GlobalAssets},{eventemitter3:1}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var GREEN=(exports.WHITE={mainColor:15658734,mainEmissive:0,secondaryColor:16777215,secondaryEmissive:0,detailColor:10066329,detailEmissive:0},exports.PURPLE={mainColor:9059245,mainEmissive:3346003,secondaryColor:3346003,secondaryEmissive:0,detailColor:16300589,detailEmissive:16300589},exports.YELLOW={mainColor:15310635,mainEmissive:10384926,secondaryColor:13590784,secondaryEmissive:9650181,detailColor:4359668,detailEmissive:4359668},exports.BLUE={mainColor:5600681,mainEmissive:12149,secondaryColor:1124425,secondaryEmissive:1255752,detailColor:0,detailEmissive:16711758},exports.GREEN={mainColor:7248181,mainEmissive:2121266,secondaryColor:2849344,secondaryEmissive:0,detailColor:16300589,detailEmissive:16300589}),RED=exports.RED={mainColor:14820114,mainEmissive:6357020,secondaryColor:8000524,secondaryEmissive:65536,detailColor:3450963,detailEmissive:3450963};exports.WHITE_EMISSIVE=10066329,exports.getRandom=function(){var o=[RED,GREEN];return o[Math.floor(Math.random()*o.length)]}},{}],6:[function(require,module,exports){"use strict";function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),_get=function t(e,i,o){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,i);if(void 0===a){var n=Object.getPrototypeOf(e);return null===n?void 0:t(n,i,o)}if("value"in a)return a.value;var s=a.get;return void 0!==s?s.call(o):void 0},_characterBase=require("./character-base"),_characterBase2=_interopRequireDefault(_characterBase),_globalAssets=require("./global-assets"),_globalAssets2=_interopRequireDefault(_globalAssets),_animations=require("./animations"),Animations=_interopRequireWildcard(_animations),_internautColors=require("./internaut-colors"),InternautColors=_interopRequireWildcard(_internautColors),Internaut=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));i.colorScheme=InternautColors.BLUE,i.shouldLookAt=!0,i.canIdleLook=!0,Object.assign(i,t),i.characterType=_characterBase.CharacterType.INTERNAUT,i.characterJSON=_globalAssets2.default.getJSON("internaut"),i.isMoving=!1,i.idleLookInterval=5e3+1e4*Math.random(),i.lastIdleLookTime=Date.now()+i.idleLookInterval;var o=[];return o.push(Animations.PRESETS.INTERNAUT_DEFAULT),t.animations&&o.push(t.animations),i.parseConfigAnimationKeys(o),i.createMesh(),i.triggerAnimation("idle"),i}return _inherits(e,t),_createClass(e,[{key:"setColors",value:function(t){t&&(this.colorScheme=t),this.colorScheme&&(this.skinnedMesh.material.materials[0].color.setHex(this.colorScheme.mainColor),this.skinnedMesh.material.materials[0].emissive.setHex(this.colorScheme.mainEmissive),this.skinnedMesh.material.materials[2].color.setHex(this.colorScheme.secondaryColor),this.skinnedMesh.material.materials[2].emissive.setHex(this.colorScheme.secondaryEmissive),this.skinnedMesh.material.materials[2].fresnelIntensity=0,this.skinnedMesh.material.materials[3].color.setHex(this.colorScheme.mainColor),this.skinnedMesh.material.materials[3].emissive.setHex(this.colorScheme.mainEmissive),this.skinnedMesh.material.materials[4].emissive.setHex(InternautColors.WHITE_EMISSIVE),this.skinnedMesh.material.materials[1].visible=!1)}},{key:"onClipAnimationStart",value:function(t){-1!==t.name.indexOf("idle")&&(this.currentIdleName=t.name)}},{key:"onClipAnimationComplete",value:function(t){if(!this.currentAnimation||t.action.name===Animations.INTERNAUT_RUN||t.action.name===Animations.INTERNAUT_RUN2||t.action.name.includes("ending"))return void(this.currentAnimation=null);"transform"===t.action.name&&this.isTransforming?this.mesh.visible=!1:t.action.name===Animations.INTERNAUT_JUMP?this.animatedJump&&(this.applyWeight(Animations.INTERNAUT_JUMP,0),this.applyWeight("landing2",1),this.triggerAnimation("landing2")):_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onClipAnimationComplete",this).call(this,t)}},{key:"setIdleState",value:function(t){this.animationState=_characterBase.AnimationState.IDLE,this.currentIdleName=t,(!this.currentAnimation||this.currentAnimation&&-1!==this.currentAnimation.name.indexOf("idle"))&&this.triggerAnimation(t),this.mixer.clipAction(t).time=Math.random()*this.mixer.clipAction(t)._clip.duration}},{key:"setJumpingState",value:function(t){this.animationState=t?_characterBase.AnimationState.JUMP:_characterBase.AnimationState.IDLE}},{key:"jump",value:function(){var t=this;this.animatedJump=!0,this.applyWeight(Animations.INTERNAUT_JUMP,1),this.setJumpingState(!0),this.triggerAnimation(Animations.INTERNAUT_JUMP),this.randomJumpFactor=Math.random(),TweenMax.to(this.mesh.position,.3,{y:40,ease:Sine.easeOut,onComplete:function(e){TweenMax.to(t.mesh.position,1.2,{y:0,ease:Sine.easeIn,onComplete:function(e){t.animatedJump=!1,t.setIdleState(t.currentIdleName)}})}})}},{key:"update",value:function(t){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.lastPosition.copy(this.mesh.position),this.canIdleLook&&this.animationState===_characterBase.AnimationState.IDLE&&this.currentIdleName===Animations.INTERNAUT_IDLE&&this.lastIdleLookTime+this.idleLookInterval<Date.now()&&(this.lastIdleLookTime=Date.now(),this.animationState=_characterBase.AnimationState.CLIP,this.triggerAnimation(Animations.INTERNAUT_LOOK))}},{key:"updateRig",value:function(){this.velocity.copy(this.mesh.position).sub(this.lastPosition),this.shouldLookAt&&this.calculateLookAt()}},{key:"calculateLookAt",value:function(){this.tempVector3.copy(this.lookAtObject.position),this.lookAtPosition.copy(this.lookAtObject.position),this.tempWorldPos.setFromMatrixPosition(this.mesh.matrixWorld),this.lookAtObject.updateMatrixWorld(),this.tempWorldPos2.setFromMatrixPosition(this.lookAtObject.matrixWorld);var t=Math.atan2(this.tempWorldPos2.x-this.tempWorldPos.x,this.tempWorldPos2.z-this.tempWorldPos.z);Math.atan2(this.tempWorldPos2.y-this.tempWorldPos.y,this.tempWorldPos2.z-this.tempWorldPos.z),this.mesh.rotation.y=this.lerpAngle(this.mesh.rotation.y,t,.3),this.animationState!==_characterBase.AnimationState.IDLE&&this.animationState!==_characterBase.AnimationState.FOLLOW_ICON||(this.mesh.rotation.y=this.lerpAngle(this.mesh.rotation.y,t,.3))}}]),e}(_characterBase2.default);exports.default=Internaut},{"./animations":2,"./character-base":3,"./global-assets":4,"./internaut-colors":5}],7:[function(require,module,exports){"use strict";function Materials(){this._textureTable={},this._materialTable={}}module.exports=new Materials;var p=Materials.prototype;p.addTextureList=function(e){for(var t in e)this._textureTable[t]=e[t]},p.addTexture=function(e,t){var a=new THREE.Texture(t);return a.needsUpdate=!0,this._textureTable[e]=a,a},p.init=function(e){this.assets=e},p.add=function(e,t){this._materialTable[e]=t},p.has=function(e){return this._materialTable.hasOwnProperty(e)},p.get=function(e){if(this._materialTable.hasOwnProperty(e))return this._materialTable[e];console.warn("Could not find material with id: "+e)},p.getTexture=function(e){if(this._textureTable.hasOwnProperty(""+e))return this._textureTable[""+e];console.warn("Could not find texture with id: "+e)},p.dispose=function(){for(var e in this._materialTable){var t=this._materialTable[e];if(t.length)for(var a=t.length-1;a>=0;a--)t[a].dispose();else if(t instanceof THREE.MeshFaceMaterial)for(var i=t.materials.length-1;i>=0;i--)t.materials[i].dispose();try{t.dispose()}catch(e){}}for(var r in this._textureTable)this._textureTable[r].dispose();this._textureTable={},this._materialTable={}}},{}],8:[function(require,module,exports){"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){
return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function getRandomAnimation(){var e=Math.floor(Math.random()*animations.length);return animations[e]}function resize(){width=contextEl.clientWidth,height=contextEl.clientHeight,renderer.setSize(width,height),camera.aspect=width/height,camera.updateProjectionMatrix()}function startRender(){isRendering=!0,render()}function stopRender(){isRendering=!1}function render(){isRendering&&window.requestAnimationFrame(render),internaut.update(1e3/60/1e3),renderer.render(scene,camera)}function triggerAnimation(){var e=getRandomAnimation();internaut.triggerAnimation(e)}function initLookAt(){lookAt.position.z=25,internaut.updateLookAt(lookAt),window.addEventListener("mousemove",onMouseMoveLookAt)}function onMouseMoveLookAt(e){var t=_mathutil2.default.normalize(e.clientX,0,width),n=_mathutil2.default.normalize(e.clientY,0,height),i=_mathutil2.default.interpolate(t,-10,10),r=_mathutil2.default.interpolate(n,-50,20);lookAt.position.x=i,lookAt.position.y=r}function initLights(){var e=new THREE.Color(settings.dirLightColor),t=new THREE.DirectionalLight(e,settings.dirLightIntensity);t.position.set(6,7,4),t.position.normalize(),scene.add(t);var n=new THREE.Color(settings.ambientLightColor),i=new THREE.AmbientLight(n,settings.ambientLightIntensity);scene.add(i)}function disposeScene(e){var t=[];e.traverse(function(e){t.push(e)});for(var n=0;n<t.length;n++)disposeObjectFromScene(t[n],e);t.length=0}function disposeObjectFromScene(e,t){if(e)try{if(e.world=null,e.parent?e.parent.remove(e):t.remove(e),e.geometry&&e.geometry.dispose(),e.material instanceof THREE.MultiMaterial)for(var n=0;n<e.material.materials.length;n++)e.material.materials[n].dispose();else e.material&&e.material.dispose()}catch(e){console.log("error disposing",e)}}function destroy(){stopRender(),renderer.dispose(),disposeScene(scene),contextEl.removeEventListener("click",triggerAnimation),window.removeEventListener("mousemove",onMouseMoveLookAt)}function onLoaded(){FOURTEEN.InterlandInternaut={init:init,destroy:destroy,startRender:startRender,stopRender:stopRender,triggerAnimation:triggerAnimation},FOURTEEN.onInterlandInternautLoaded&&FOURTEEN.onInterlandInternautLoaded()}var _globalAssets=require("./global-assets"),_globalAssets2=_interopRequireDefault(_globalAssets),_internaut=require("./internaut"),_internaut2=_interopRequireDefault(_internaut),_settings=require("./settings"),settings=_interopRequireWildcard(_settings),_mathutil=require("./mathutil"),_mathutil2=_interopRequireDefault(_mathutil),_animations=require("./animations"),ANIMATIONS=_interopRequireWildcard(_animations),loadAsset=function(e,t){return $.getJSON(t).then(function(t){_globalAssets2.default.addJSON(_defineProperty({},e,t))})},width=void 0,height=void 0,internaut=void 0,scene=void 0,renderer=void 0,camera=void 0,lookAt=new THREE.Object3D,contextEl=void 0,isRendering=!1,animations=[ANIMATIONS.INTERNAUT_WIGGLE,ANIMATIONS.INTERNAUT_SUPERHAPPYTRIGGER,ANIMATIONS.INTERNAUT_BOUNCEWALL,ANIMATIONS.INTERNAUT_REPORT,ANIMATIONS.INTERNAUT_WRONGREPORTED],init=function(e){contextEl=e,scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(45,width/height,.1,1e3),renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),renderer.setSize(width,height),renderer.gammaInput=!1,renderer.gammaOutput=!1,renderer.setPixelRatio(window.devicePixelRatio),contextEl.appendChild(renderer.domElement),camera.position.z=25,camera.position.y=17,camera.lookAt(new THREE.Vector3(0,8,0)),internaut=new _internaut2.default,scene.add(internaut.mesh),internaut.mesh.scale.setScalar(.3),contextEl.addEventListener("click",triggerAnimation),resize(),window.addEventListener("resize",resize),initLights(),initLookAt()};loadAsset("internaut","/js/bundles/interland/data/internaut.json").then(function(){return loadAsset("internaut_anim_idle","/js/bundles/interland/data/internaut_anim_idle.json")}).then(function(){return loadAsset("internaut_anim_look","/js/bundles/interland/data/internaut_anim_look.json")}).then(function(){return loadAsset("internaut_anim_wiggle","/js/bundles/interland/data/internaut_anim_wiggle.json")}).then(function(){return loadAsset("internaut_anim_report","/js/bundles/interland/data/internaut_anim_report.json")}).then(function(){return loadAsset("internaut_anim_superhappytrigger","/js/bundles/interland/data/internaut_anim_superhappytrigger.json")}).then(function(){return loadAsset("internaut_anim_wrongreported","/js/bundles/interland/data/internaut_anim_wrongreported.json")}).then(function(){return loadAsset("internaut_anim_bouncewall","/js/bundles/interland/data/internaut_anim_bouncewall.json")}).then(onLoaded)},{"./animations":2,"./global-assets":4,"./internaut":6,"./mathutil":10,"./settings":13}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={MM_Tiles_MAT:{color:865390,emissive:2435913},MM_GreyDark_MAT:{color:7897489,emissive:2765634},MM_BlueLight_MAT:{color:5600681,emissive:12149},MM_Snow_MAT:{color:7631988,emissive:6453157},MM_Grey_MAT:{color:8026746,emissive:4996412},MM_BlueDarkest_MAT:{color:1647424,emissive:3874},MM_Mirror_MAT:{color:0,emissive:65535,blending:2,opacity:.5,transparent:!0},MM_Edge_MAT:{color:16777215,emissive:0},MM_Red2_MAT:{color:0,emissive:16742244},MM_Red1_MAT:{color:0,emissive:13373196},Eyes_MAT:{color:8816776,emissive:6974829},RR_Red1_MAT:{color:14820114,emissive:6357020},RR_RedRocks_MAT:{color:13132870,emissive:7480377},RR_Red2_MAT:{color:16732748,emissive:8918803},RR_PathWhite_MAT:{color:6710886,emissive:11303798},RR_Foam_MAT:{color:16777215,emissive:0,blending:2,opacity:.46},RR_Grey_MAT:{color:8026746,emissive:4996412},"lambert1.001":{color:6710886,emissive:0},RR_Bottom_MAT:{color:7615652,emissive:9909949},RR_Water_MAT:{color:11263,emissive:28415,specular:8355711,shininess:20,opacity:.8},"CloudMat1.001":{color:13421772,emissive:16777215},KK_Blue_MAT:{color:84352,emissive:84352},Placehold:{color:6687756,emissive:0},KK_PodGrey_MAT:{color:7825241,emissive:1980490},KK_PodGreen_MAT:{color:1742370,emissive:1989648},KK_GreyBlue_MAT:{color:9537911,emissive:2574689},KK_Tree_MAT:{color:1917491,emissive:1392147},KK_Moss_MAT:{color:2841643,emissive:2638872},KK_Button_MAT:{color:6032384,emissive:11933696},KK_Beige_MAT:{color:6906428,emissive:8413774},KK_Brown_MAT:{color:3351834,emissive:3559739},KK_Grey_MAT:{color:7826018,emissive:3818820},TT_Sand_MAT:{color:15232e3,emissive:12610354},TT_Orange_MAT:{color:16734464,emissive:12207104},TT_Orange_MAT1:{color:16734464,emissive:12207104},TT_Grey_MAT:{color:6580846,emissive:7364950},TT_Yellow_MAT:{color:15803907,emissive:4731941},TT_Red_MAT:{color:7938560,emissive:8004900},TT_Cream_MAT:{color:8682359,emissive:14918748},TT_Gate1_MAT:{color:10461087,emissive:4669504},TT_Gate2_MAT:{color:4342338,emissive:4342338},TT_Gate3_MAT:{color:4342338,emissive:4342338},TT_Grey3_MAT:{color:4342338,emissive:3746860},TT_FogMount_MAT:{color:7279872,emissive:4351631},TT_HouseRed_MAT:{color:9118995,emissive:7938594},RockBottom1_MAT:{color:5457467,emissive:4798513},RockBottom2_MAT:{color:5457467,emissive:4798513},KK_Tree_MAT_i:{color:344339,emissive:22061},KK_Brown_MAT_i:{color:2563349,emissive:3493691},KK_Beige_MAT_i:{color:5459503,emissive:4731685},KK_PodGrey_MAT_i:{color:7759448,emissive:2437176},KK_PodGreen_MAT_i:{color:684608,emissive:1136642},KK_GreyBlue_MAT_i:{color:7564639,emissive:2574942},KK_Blue_MAT_i:{color:14950,emissive:18559},RockBottom2_MAT_i:{color:4406327,emissive:4669242},RockBottom1_MAT_i:{color:4866876,emissive:2565409},KK_Moss_MAT_i:{color:1978398,emissive:5462325},MM_Snow_MAT_i:{color:7631988,emissive:6453157},MM_Mirror_MAT_i:{color:2068428,emissive:10132122,blending:2,opacity:.5,transparent:!0},MM_BlueLight_MAT_i:{color:5534889,emissive:11892},MM_BlueDarkest_MAT_i:{color:4283563,emissive:9043},MM_Blue2_MAT_i:{color:3568249,emissive:12926},MM_Grey_MAT_i:{color:7237491,emissive:4934993},TT_Grey_MAT_i:{color:5198935,emissive:7299167},MM_Blue3_MAT_i:{color:3560313,emissive:11373},RR_Water_MAT_i:{color:5333395,emissive:2325917},RR_Red1_MAT_i:{color:9968413,emissive:8060942},RR_Red2_MAT_i:{color:15161427,emissive:10364450},RR_PathWhite2_MAT_i:{color:9474192,emissive:11511175},TT_Orange_MAT_i:{color:16734208,emissive:12141312},TT_Red_MAT_i:{color:7938560,emissive:8004900},TT_Cream_MAT_i:{color:6906207,emissive:14852955},TT_Yellow_MAT_i:{color:15166208,emissive:12544561},TT_Sand_MAT_i:{color:12288817,emissive:12610354},TT_Grey2_MAT_i:{color:5327679,emissive:7039851},TT_Gate2_MAT_i:{color:4342338,emissive:6756364}}},{}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={normalize:function(t,n,e){return(t-n)/(e-n)},interpolate:function(t,n,e){return n+(e-n)*t},limit:function(t,n,e){return Math.min(Math.max(n,t),e)},limitInt:function(t,n,e){return Math.round(Math.min(Math.max(n,t),e))},dist:function(t,n,e,r){return Math.sqrt((e-t)*(e-t)+(r-n)*(r-n))}}},{}],11:[function(require,module,exports){"use strict";module.exports=function(){var n={},o=window.location.href.substring(window.location.href.indexOf("?")+1,window.location.href.length);-1!==o.indexOf("#")&&(o=o.substring(0,o.indexOf("#")));for(var e=o.split("&"),t=0;t<e.length;t++){var i=e[t].split("="),r=decodeURIComponent(i[0]),d=decodeURIComponent(i[1]);n[r]=d||!0}return n}()},{}],12:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function replaceMaterial(e,r){e.type="MeshLambertMaterial",e.shininess=0,-1!==e.name.indexOf("eye")&&(e.name="Eyes_MAT");var a={};_query2.default.style&&"indie"===_query2.default.style&&(a={color:1118481,emissive:0}),Object.assign(e,_materials2.default[e.name],r,a),delete e.specular}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=replaceMaterial;var _query=require("./query"),_query2=_interopRequireDefault(_query),_materials=require("./materials"),_materials2=_interopRequireDefault(_materials)},{"./materials":9,"./query":11}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.dirLightColor=16777215,exports.dirLightIntensity=1,exports.dirLightX=.86,exports.dirLightY=.38,exports.dirLightZ=.34,exports.ambientLightColor=16777215,exports.ambientLightIntensity=.25,exports.internautScale=2,exports.useConvertGammaToLinear=!1,exports.showWorld=!0,exports.cloudX=-3430,exports.cloudY=810,exports.cloudZ=4400},{}]},{},[8]);
